"use strict";(self.webpackChunku_gallery=self.webpackChunku_gallery||[]).push([[43],{929:(e,n,t)=>{t.d(n,{A:()=>s});t(43);var a=t(564),r=t(579);const s=()=>{const e=(0,a.Zp)(),{pathname:n}=(0,a.zy)(),t="/"===n||"/home"===n;return(0,r.jsxs)("div",{className:"tabs-header",children:[(0,r.jsx)("div",{className:"logo",onClick:()=>e("/home"),"aria-hidden":"true",role:"button",tabIndex:0,onKeyDown:n=>"Enter"===n.key&&e("/home")}),(0,r.jsx)(a.k2,{to:"/",end:!0,className:"nav-btn ".concat(t?"active":""),children:"Home"}),(0,r.jsx)(a.k2,{to:"/history",className:e=>{let{isActive:n}=e;return"nav-btn ".concat(n?"active":"")},children:"History"})]})}},424:(e,n,t)=>{t.r(n),t.d(n,{default:()=>de});var a=t(555),r=t(43);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},s.apply(this,arguments)}function o(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}var i=u((function(e){return"string"===typeof e?e:null})),l=function(e){return null!==e&&void 0!==e};function u(e){return function(n){return l(e(n))}}var c=function(e){return Object.keys(e).reduce((function(n,t){var a,r=e[t];return s({},n,l(r)?((a={})[t]=r,a):{})}),{})};function h(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n.length-1;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var s=n[0].apply(this,t),o=1;o<=a;o++)s=n[o].call(this,s);return s}}var d,p,m=u((function(e){return l(e)&&"object"===typeof e&&!Array.isArray(e)?e:null})),f=u((function(e){return Array.isArray(e)&&e.every(i)&&e.length>0?e:null})),g=u((function(e){return m(e)&&"errors"in e&&f(e.errors)?{errors:e.errors}:null})),v=function(e){this.message=e},y=function(e){if(function(e){var n=e.headers.get("content-type");return l(n)&&/application\/[^+]*[+]?(json);?.*/.test(n)}(e))return e.json().catch((function(e){throw new v("unable to parse JSON response.")}));throw new v("expected JSON response from server.")},w=function(e){return function(n){return(n.ok?e({response:n}).then((function(e){return{type:"success",status:n.status,response:e,originalResponse:n}})):y(n).then((function(e){return s({type:"error",status:n.status},function(e){return g(e)?{errors:e.errors,source:"api"}:{errors:["Responded with a status code outside the 2xx range, and the response body is not recognisable."],source:"decoding"}}(e),{originalResponse:n})}))).catch((function(e){if(e instanceof v)return{type:"error",source:"decoding",status:n.status,originalResponse:n,errors:[e.message]};throw e}))}},x=function(){return function(e){var n=e.response;return y(n)}},j=function(e){var n=e.pathname,t=e.query;return function(e){var a=new URL(e);return function(e){return function(n){"/"===n.pathname?n.pathname=e:n.pathname+=e}}(n)(a),function(e){return function(n){Object.keys(e).forEach((function(t){return n.searchParams.set(t,e[t].toString())}))}}(t)(a),a.toString()}},b=function(e){return function(n,t){void 0===t&&(t={});var a=e(n),r=a.headers,i=a.query;return s({},o(a,["headers","query"]),t,{query:i,headers:s({},r,t.headers)})}},P=function(e){return e},q=function(e){var n=e.accessKey,t=e.apiVersion,a=void 0===t?"v1":t,r=e.apiUrl,i=void 0===r?"https://api.unsplash.com":r,u=e.headers,c=e.fetch,d=o(e,["accessKey","apiVersion","apiUrl","headers","fetch"]);return function(e){var t=e.handleResponse;return h(e.handleRequest,(function(e){var r=e.pathname,o=e.query,h=e.method,p=void 0===h?"GET":h,m=e.headers,f=e.body,g=e.signal,v=j({pathname:r,query:o})(i),y=s({method:p,headers:s({},u,m,{"Accept-Version":a},l(n)?{Authorization:"Client-ID "+n}:{}),body:f,signal:g},d);return(null!=c?c:fetch)(v,y).then(w(t))}))}},N="x-total",k=function(e){var n=e.headers.get(N);if(l(n)){var t=parseInt(n);if(Number.isInteger(t))return t;throw new v("expected "+N+" header to be valid integer.")}throw new v("expected "+N+" header to exist.")},I=function(){return function(e){var n=e.response;return x()({response:n}).then((function(e){return{results:e,total:k(n)}}))}},R=function(e){return l(e)?{collections:e.join()}:{}},S=function(e){return l(e)?{topics:e.join()}:{}},A=function(e){var n=e.page,t=e.perPage,a=e.orderBy;return c({per_page:t,order_by:a,page:n})},C="/collections",E=function(){var e=function(e){var n=e.collectionId;return C+"/"+n+"/photos"};return{getPathname:e,handleRequest:b((function(n){var t=n.collectionId,a=n.orientation,r=o(n,["collectionId","orientation"]);return{pathname:e({collectionId:t}),query:c(s({},A(r),{orientation:a}))}})),handleResponse:I()}}(),O=function(){var e=function(e){var n=e.collectionId;return C+"/"+n};return{getPathname:e,handleRequest:b((function(n){var t=n.collectionId;return{pathname:e({collectionId:t}),query:{}}})),handleResponse:x()}}(),L=function(){var e=function(){return C};return{getPathname:e,handleRequest:b((function(n){return void 0===n&&(n={}),{pathname:e(),query:A(n)}})),handleResponse:I()}}(),U=function(){var e=function(e){var n=e.collectionId;return C+"/"+n+"/related"};return{getPathname:e,handleRequest:b((function(n){var t=n.collectionId;return{pathname:e({collectionId:t}),query:{}}})),handleResponse:x()}}(),V="/photos",D=function(){return{getPathname:function(e){return V},handleRequest:b((function(e){return void 0===e&&(e={}),{pathname:V,query:c(A(e))}})),handleResponse:I()}}(),T=function(){var e=function(e){var n=e.photoId;return V+"/"+n};return{getPathname:e,handleRequest:b((function(n){var t=n.photoId;return{pathname:e({photoId:t}),query:{}}})),handleResponse:x()}}(),K=function(){var e=function(e){var n=e.photoId;return V+"/"+n+"/statistics"};return{getPathname:e,handleRequest:b((function(n){var t=n.photoId;return{pathname:e({photoId:t}),query:{}}})),handleResponse:x()}}(),z=function(){var e=function(){return V+"/random"};return{getPathname:e,handleRequest:b((function(n){var t=void 0===n?{}:n,a=t.collectionIds,r=t.contentFilter,i=t.topicIds,l=o(t,["collectionIds","contentFilter","topicIds"]);return{pathname:e(),query:c(s({},l,{content_filter:r},R(a),S(i))),headers:{"cache-control":"no-cache"}}})),handleResponse:x()}}(),_={handleRequest:b((function(e){var n=function(e){var n=new URL(e),t=n.pathname,a=function(e){var n={};return e.forEach((function(e,t){n[t]=e})),n}(n.searchParams);return{query:a,pathname:"/"===t?void 0:t}}(e.downloadLocation),t=n.pathname,a=n.query;if(!l(t))throw new Error("Could not parse pathname from url.");return{pathname:t,query:c(a)}})),handleResponse:x()},F="/search",H=function(){var e=function(){return F+"/photos"};return{getPathname:function(n){return e()},handleRequest:b((function(n){var t=n.query,a=n.page,r=n.perPage,i=n.orderBy,l=n.collectionIds,u=n.lang,h=n.contentFilter,d=o(n,["query","page","perPage","orderBy","collectionIds","lang","contentFilter"]);return{pathname:e(),query:c(s({query:t,content_filter:h,lang:u,order_by:i},A({page:a,perPage:r}),R(l),d))}})),handleResponse:x()}}(),B=function(){var e=function(){return F+"/collections"};return{getPathname:function(n){return e()},handleRequest:b((function(n){var t=n.query,a=o(n,["query"]);return{pathname:e(),query:s({query:t},A(a))}})),handleResponse:x()}}(),G=function(){var e=function(){return F+"/users"};return{getPathname:function(n){return e()},handleRequest:b((function(n){var t=n.query,a=o(n,["query"]);return{pathname:e(),query:s({query:t},A(a))}})),handleResponse:x()}}(),M="/users",J=function(){var e=function(e){var n=e.username;return M+"/"+n};return{getPathname:e,handleRequest:b((function(n){var t=n.username;return{pathname:e({username:t}),query:{}}})),handleResponse:x()}}(),W=function(){var e=function(e){var n=e.username;return M+"/"+n+"/photos"};return{getPathname:e,handleRequest:b((function(n){var t=n.username,a=n.stats,r=n.orientation,i=o(n,["username","stats","orientation"]);return{pathname:e({username:t}),query:c(s({},A(i),{orientation:r,stats:a}))}})),handleResponse:I()}}(),Z=function(){var e=function(e){var n=e.username;return M+"/"+n+"/likes"};return{getPathname:e,handleRequest:b((function(n){var t=n.username,a=n.orientation,r=o(n,["username","orientation"]);return{pathname:e({username:t}),query:c(s({},A(r),{orientation:a}))}})),handleResponse:I()}}(),Q=function(){var e=function(e){var n=e.username;return M+"/"+n+"/collections"};return{getPathname:e,handleRequest:b((function(n){var t=n.username,a=o(n,["username"]);return{pathname:e({username:t}),query:A(a)}})),handleResponse:I()}}(),Y="/topics",X=function(e){var n=e.topicIdOrSlug;return Y+"/"+n},$=P({getPathname:X,handleRequest:function(e){var n=e.page,t=e.perPage,a=e.orderBy,r=e.topicIdsOrSlugs;return{pathname:Y,query:c(s({},A({page:n,perPage:t}),{ids:null==r?void 0:r.join(","),order_by:a}))}},handleResponse:I()}),ee=P({getPathname:X,handleRequest:function(e){var n=e.topicIdOrSlug;return{pathname:X({topicIdOrSlug:n}),query:{}}},handleResponse:x()}),ne=function(){var e=h(X,(function(e){return e+"/photos"}));return{getPathname:e,handleRequest:function(n){var t=n.topicIdOrSlug,a=n.orientation,r=o(n,["topicIdOrSlug","orientation"]);return{pathname:e({topicIdOrSlug:t}),query:c(s({},A(r),{orientation:a}))}},handleResponse:I()}}();!function(e){e.Afrikaans="af",e.Amharic="am",e.Arabic="ar",e.Azerbaijani="az",e.Belarusian="be",e.Bulgarian="bg",e.Bengali="bn",e.Bosnian="bs",e.Catalan="ca",e.Cebuano="ceb",e.Corsican="co",e.Czech="cs",e.Welsh="cy",e.Danish="da",e.German="de",e.Greek="el",e.English="en",e.Esperanto="eo",e.Spanish="es",e.Estonian="et",e.Basque="eu",e.Persian="fa",e.Finnish="fi",e.French="fr",e.Frisian="fy",e.Irish="ga",e.ScotsGaelic="gd",e.Galician="gl",e.Gujarati="gu",e.Hausa="ha",e.Hawaiian="haw",e.Hindi="hi",e.Hmong="hmn",e.Croatian="hr",e.HaitianCreole="ht",e.Hungarian="hu",e.Armenian="hy",e.Indonesian="id",e.Igbo="ig",e.Icelandic="is",e.Italian="it",e.Hebrew="iw",e.Japanese="ja",e.Javanese="jw",e.Georgian="ka",e.Kazakh="kk",e.Khmer="km",e.Kannada="kn",e.Korean="ko",e.Kurdish="ku",e.Kyrgyz="ky",e.Latin="la",e.Luxembourgish="lb",e.Lao="lo",e.Lithuanian="lt",e.Latvian="lv",e.Malagasy="mg",e.Maori="mi",e.Macedonian="mk",e.Malayalam="ml",e.Mongolian="mn",e.Marathi="mr",e.Malay="ms",e.Maltese="mt",e.Myanmar="my",e.Nepali="ne",e.Dutch="nl",e.Norwegian="no",e.Nyanja="ny",e.Oriya="or",e.Punjabi="pa",e.Polish="pl",e.Pashto="ps",e.Portuguese="pt",e.Romanian="ro",e.Russian="ru",e.Kinyarwanda="rw",e.Sindhi="sd",e.Sinhala="si",e.Slovak="sk",e.Slovenian="sl",e.Samoan="sm",e.Shona="sn",e.Somali="so",e.Albanian="sq",e.Serbian="sr",e.Sesotho="st",e.Sundanese="su",e.Swedish="sv",e.Swahili="sw",e.Tamil="ta",e.Telugu="te",e.Tajik="tg",e.Thai="th",e.Turkmen="tk",e.Filipino="tl",e.Turkish="tr",e.Tatar="tt",e.Uighur="ug",e.Ukrainian="uk",e.Urdu="ur",e.Uzbek="uz",e.Vietnamese="vi",e.Xhosa="xh",e.Yiddish="yi",e.Yoruba="yo",e.ChineseSimplified="zh",e.ChineseTraditional="zh-TW",e.Zulu="zu"}(d||(d={})),function(e){e.LATEST="latest",e.POPULAR="popular",e.VIEWS="views",e.DOWNLOADS="downloads",e.OLDEST="oldest"}(p||(p={}));var te=h(q,(function(e){return{photos:{get:e(T),list:e(D),getStats:e(K),getRandom:e(z),trackDownload:e(_)},users:{getPhotos:e(W),getCollections:e(Q),getLikes:e(Z),get:e(J)},search:{getCollections:e(B),getPhotos:e(H),getUsers:e(G)},collections:{getPhotos:e(E),get:e(O),list:e(L),getRelated:e(U)},topics:{list:e($),get:e(ee),getPhotos:e(ne)}}})),ae=t(564),re=(t(114),t(929)),se=t(579);const oe=e=>new Intl.NumberFormat("en-US").format(e),ie=te({accessKey:"_TfSGps8TbKyFhdW-5VrcF2KGBCPxl2k7xZCqlQRfpQ"}),le=e=>{let{photo:n,onView:t}=e;const{user:a,urls:r,likes:s,views:o,downloads:i}=n,l=()=>null===t||void 0===t?void 0:t(n);return(0,se.jsxs)("div",{className:"imgPostContainer",onClick:l,onKeyDown:e=>"Enter"===e.key&&l(),role:"button",tabIndex:0,"aria-label":"View photo by ".concat(a.name),children:[(0,se.jsx)("img",{className:"img",src:r.regular,alt:"Photo by "+a.name}),(0,se.jsxs)("div",{className:"viewIndicator","aria-hidden":"true",children:[(0,se.jsx)("span",{className:"viewIndicatorIcon"}),(0,se.jsx)("span",{children:"View"})]}),(0,se.jsxs)("div",{className:"photoDetails",children:[(0,se.jsxs)("a",{className:"credit",target:"_blank",rel:"noopener noreferrer",href:"https://unsplash.com/@".concat(a.username),onClick:e=>e.stopPropagation(),children:["Photo by ",a.name]}),(0,se.jsxs)("div",{className:"photo-stats-bar",children:[(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Likes"}),(0,se.jsx)("span",{className:"stat-value",children:oe(s)})]}),void 0!==o&&(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Views"}),(0,se.jsx)("span",{className:"stat-value",children:oe(o)})]}),void 0!==i&&(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Downloads"}),(0,se.jsx)("span",{className:"stat-value",children:oe(i)})]})]})]})]})},ue=e=>{var n;let{photo:t,onClose:a}=e;const[s,o]=(0,r.useState)(!1),i=(0,r.useRef)(0);if((0,r.useEffect)((()=>{t&&(o(!1),i.current=Date.now())}),[t]),r.useEffect((()=>{const e=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[a]),!t)return null;const l=null!==(n=t.urls.full)&&void 0!==n?n:t.urls.regular,{user:u}=t;return(0,se.jsxs)("div",{className:"lightbox-backdrop",onClick:e=>{e.target===e.currentTarget&&a()},role:"dialog","aria-modal":"true","aria-label":"View full size image",children:[(0,se.jsx)("button",{type:"button",className:"lightbox-close",onClick:a,"aria-label":"Close"}),(0,se.jsxs)("div",{className:"lightbox-content",children:[(0,se.jsxs)("div",{className:"lightbox-img-wrapper",children:[!s&&(0,se.jsx)("div",{className:"image-loader"}),(void 0!==t.likes||void 0!==t.views||void 0!==t.downloads)&&(0,se.jsxs)("div",{className:"lightbox-stats",children:[(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Likes"}),(0,se.jsx)("span",{className:"stat-value",children:oe(t.likes)})]}),void 0!==t.views&&(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Views"}),(0,se.jsx)("span",{className:"stat-value",children:oe(t.views)})]}),void 0!==t.downloads&&(0,se.jsxs)("div",{className:"stat-item",children:[(0,se.jsx)("span",{className:"stat-label",children:"Downloads"}),(0,se.jsx)("span",{className:"stat-value",children:oe(t.downloads)})]})]}),(0,se.jsx)("img",{src:l,alt:"Photo by "+u.name,className:"lightbox-img ".concat(s?"loaded":""),onLoad:()=>{o(!0)}})]}),(0,se.jsxs)("a",{className:"lightbox-credit",target:"_blank",rel:"noopener noreferrer",href:"https://unsplash.com/@".concat(u.username),onClick:e=>e.stopPropagation(),style:{opacity:s?1:0,transition:"opacity 0.5s 0.2s"},children:["Photo by ",u.name]})]})]})},ce=e=>{let{onPhotoView:n}=e;const[t,a]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{o(!0);try{const e=await ie.photos.list({page:1,perPage:20});e.response&&a(e.response.results)}catch(e){console.error("Error fetching popular photos:",e),l(!0)}finally{o(!1)}})()}),[]),(0,se.jsxs)("div",{className:"top-section",children:[(0,se.jsx)("h1",{children:"Top 20 Images"}),s&&(0,se.jsxs)("div",{className:"loading-dots","aria-label":"Loading",children:[(0,se.jsx)("span",{}),(0,se.jsx)("span",{}),(0,se.jsx)("span",{})]}),i&&(0,se.jsx)("div",{className:"api-message",children:"API limit reached. No popular images available."}),(0,se.jsx)("ul",{className:"topPhotosGrid",children:t.map(((e,t)=>(0,se.jsx)("li",{className:"topPhotoItem",style:{animationDelay:"".concat(.05*t,"s")},children:(0,se.jsx)(le,{photo:e,onView:n})},e.id)))})]})},he=e=>{let{onPhotoView:n}=e;const t=(0,ae.Zp)(),s=(0,ae.zy)(),o=new URLSearchParams(s.search).get("query"),[i,l]=(0,r.useState)({results:[]}),[u,c]=(0,r.useState)(o||"moody"),[h,d]=(0,r.useState)(o||""),[p,m]=(0,r.useState)(1),[f,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),w=(0,r.useRef)(null),x=(0,r.useRef)(null);(0,r.useEffect)((()=>{m(1),y(!1),l({results:[]}),j(u,1)}),[u]),(0,r.useEffect)((()=>{if(!v&&!f)return w.current=new IntersectionObserver((e=>{e[0].isIntersecting&&m((e=>e+1))})),x.current&&w.current.observe(x.current),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[f,v]);const j=async(e,n)=>{if(!v){g(!0);try{const t=await ie.search.getPhotos({query:e,orientation:"landscape",page:n});if(t.errors)return y(!0),void l((e=>({results:[...e.results,{id:"placeholder-403",likes:0,width:600,height:400,urls:{regular:"https://placehold.co/800/251e1e/white?text=Error+403+Unsplash+API+Limited&font=Playfair Display"},color:null,user:{username:"placeholder_user",name:"Placeholder User"},views:0,downloads:0}]})));if(t.response){const n=await Promise.all(t.response.results.map((async e=>{const n=await ie.photos.getStats({photoId:e.id});return"success"===n.type?(0,a.A)((0,a.A)({},e),{},{views:n.response.views.total,downloads:n.response.downloads.total}):e})));l((e=>({results:[...e.results,...n]}))),b(e)}}catch(t){console.error("API request failed:",t),y(!0),l((e=>({results:[...e.results,{id:"placeholder-403",likes:0,width:600,height:400,urls:{regular:"https://placehold.co/800/251e1e/white?text=Error+403+Unsplash+API+Limited&font=Playfair Display"},color:null,user:{username:"placeholder_user",name:"Placeholder User"},views:0,downloads:0}]})))}finally{g(!1)}}},b=e=>{const n=JSON.parse(localStorage.getItem("searchHistory")||"[]");if(!n.includes(e)){const t=[e,...n].slice(0,5);localStorage.setItem("searchHistory",JSON.stringify(t))}};(0,r.useEffect)((()=>{p>1&&j(u,p)}),[p]);return(0,se.jsxs)("div",{className:"feed",children:[(0,se.jsx)("input",{type:"text",placeholder:"Search photos...",value:h,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&h.trim()&&(t("/?query=".concat(h.trim())),c(h.trim()))},className:"search-input","aria-label":"Search Unsplash photos"}),(0,se.jsx)("ul",{className:"columnUl",children:i.results.map(((e,t)=>(0,se.jsx)("li",{className:"li",ref:t===i.results.length-1?x:null,style:{animationDelay:"".concat(Math.min(.04*t,.8),"s")},children:(0,se.jsx)(le,{photo:e,onView:n})},e.id)))}),f&&(0,se.jsxs)("div",{className:"loading-dots","aria-label":"Loading more",children:[(0,se.jsx)("span",{}),(0,se.jsx)("span",{}),(0,se.jsx)("span",{})]}),v&&(0,se.jsx)("div",{className:"api-message",children:"API limit reached. No more images can be loaded."})]})},de=()=>{const[e,n]=(0,r.useState)(null);return(0,se.jsxs)("main",{className:"root",children:[(0,se.jsx)(ue,{photo:e,onClose:()=>n(null)}),(0,se.jsx)(re.A,{}),(0,se.jsx)(ce,{onPhotoView:n}),(0,se.jsx)(he,{onPhotoView:n})]})}},114:()=>{}}]);
//# sourceMappingURL=43.3566501c.chunk.js.map